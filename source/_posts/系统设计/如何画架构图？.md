---
title: 如何画架构图？
tags: [design]
categories: [系统设计]
date: 2023-01-13
cover: https://picx.zhimg.com/v2-b41d4f2c72f81648f632d2de572fb1a7_720w.jpg?source=172ae18b
---

## [整体思路](https://www.processon.com/mindmap/634802fff346fb07debb063a)

## 什么是架构？

架构是结构和愿景，是概念的体现，是对系统中的实体以及实体之间的关系所进行的抽象描述，是一系列的决策。 架构设计 是 面向于解决具体的业务问题

### 什么是架构图？

系统架构图是为了抽象地表示软件系统的整体轮廓和各个组件之间的相互关系和约束边界，以及软件系统的物理部署和软件系统的演进方向的整体视图。

### 架构图的作用

一图胜千言。将架构图作为一个很好的载体把架构信息传递出去。

1. 解决沟通障碍
2. 达成共识
3. 减少歧义

### 架构图分类

分类有杂，有一种比较流行的是4+1视图。

| 视图名称     | 通常表示          | 作用                                                                                                                 |
| ------------ | ----------------- | -------------------------------------------------------------------------------------------------------------------- |
| 场景视图     | 用例图            | 描述系统的参与者与功能用例间的关系，反映系统的最终需求和交互设计                                                     |
| 逻辑视图     | UML的组件图和类图 | 描述系统软件功能拆解后的组件关系（组件约束和边界）反映系统整体组成与系统如何构建的过程                               |
| 物理视图     |                   | 描述系统软件到物理硬件的映射关系，反映出系统的组件是如何部署到一组可计算机器节点上，用于指导软件系统的部署实施过程。 |
| 处理流程视图 | 时序图和流程图    | 描述系统软件组件之间的通信时序，数据的输入输出，反映系统的功能流程与数据流程                                         |
| 开发视图     |                   | 描述系统的模块划分和组成，以及细化到内部包的组成设计，服务于开发人员，反映系统开发实施过程。                         |

### 如何画架构图

在画出一个好的架构图之前， 首先应该要明确其受众，再想清楚要给他们传递什么信息
`简而言之，画之前想好：画图给谁看，看什么，怎么样不解释就看懂。`

### 好的架构图的标准

- 画出的图好不好的一个直接标准就是：受众有没有准确接收到想传递的信息。
- 从受众角度来说，一个好的架构图是不需要解释的，它应该是自描述的，并且要具备一致性和足够的准确性，能够与代码相呼应。

## 推荐的画图方法:C4模型

> C4官网：https://c4model.com/
> 书籍：《程序员必读之软件架构》

### 语境图(System Context Diagram)

#### 用途

它的用户是谁，谁会用它，它要如何融入已有的IT环境。这个图的受众可以是开发团队的内部人员、外部的技术或非技术人员。即：
构建的系统是什么
谁会用它
如何融入已有的IT环境

#### 怎么画

中间是自己的系统，周围是用户和其它与之相互作用的系统。这个图的关键就是梳理清楚待建设系统的用户和高层次的依赖，梳理清楚了画下来只需要几分钟时间。

### 容器图(Container Diagram)

容器图是把语境图里待建设的系统做了一个展开。
<img src="%E5%A6%82%E4%BD%95%E7%94%BB%E6%9E%B6%E6%9E%84%E5%9B%BE%EF%BC%9F/24F3C3A8-E613-451D-84C1-E19800D3C0A7.jpg" alt="img" style="zoom:80%;" />

#### 用途

这个图的受众可以是团队内部或外部的开发人员，也可以是运维人员。用途可以罗列为：

- 展现了软件系统的整体形态
- 体现了高层次的技术决策
- 系统中的职责是如何分布的，容器间的是如何交互的
- 告诉开发者在哪里写代码

#### 怎么画

用一个框图来表示，内部可能包括名称、技术选择、职责，以及这些框图之间的交互，如果涉及外部系统，最好明确边界。

### 组件图(Component Diagram)

> 组件图是把某个容器进行展开，描述其内部的模块。

<img src="%E5%A6%82%E4%BD%95%E7%94%BB%E6%9E%B6%E6%9E%84%E5%9B%BE%EF%BC%9F/7BBEADE0-F4BB-4227-952F-D28ABD5E16D8-3098198.jpg" alt="img" style="zoom:80%;" />

#### 用途

这个图主要是给内部开发人员看的，怎么去做代码的组织和构建。其用途有：

- 描述了系统由哪些组件/服务组成
- 厘清了组件之间的关系和依赖
- 为软件开发如何分解交付提供了框架

### 类图(Code/Class Diagram)

这个图很显然是给技术人员看的，比较常见，就不详细介绍了。
<img src="%E5%A6%82%E4%BD%95%E7%94%BB%E6%9E%B6%E6%9E%84%E5%9B%BE%EF%BC%9F/078ED0F5-A51D-43D6-BBDD-8BAD535782CD-3098211-3098214.jpg" alt="img" style="zoom:67%;" />

未完，待续。。。。
