<!DOCTYPE html><html lang="zh-Hans" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>Maven 实战指南 | 发光の金子吖</title><meta name="author" content="Golden"><meta name="copyright" content="Golden"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="《maven 实战》记得是从二手网店淘到的，已经买了有小半年，还只看了个目录； 打算用个端午的一天时间给它啃下来。。  maven 规范默认情况下：  项目主代码位于 src&#x2F;main&#x2F;java 目录下，,编译后在 target&#x2F;classes 下 项目测试代码位于 src&#x2F;test&#x2F;java ,编译后在 target&#x2F;test-cla">
<meta property="og:type" content="article">
<meta property="og:title" content="Maven 实战指南">
<meta property="og:url" content="https://zhao520a1a.github.io/2019/06/12/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7/maven%20%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97/index.html">
<meta property="og:site_name" content="发光の金子吖">
<meta property="og:description" content="《maven 实战》记得是从二手网店淘到的，已经买了有小半年，还只看了个目录； 打算用个端午的一天时间给它啃下来。。  maven 规范默认情况下：  项目主代码位于 src&#x2F;main&#x2F;java 目录下，,编译后在 target&#x2F;classes 下 项目测试代码位于 src&#x2F;test&#x2F;java ,编译后在 target&#x2F;test-cla">
<meta property="og:locale">
<meta property="og:image" content="https://www.somkiat.cc/wp-content/uploads/2016/08/maven-00.jpg">
<meta property="article:published_time" content="2019-06-11T16:00:00.000Z">
<meta property="article:modified_time" content="2023-05-05T15:14:20.868Z">
<meta property="article:author" content="Golden">
<meta property="article:tag" content="maven">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.somkiat.cc/wp-content/uploads/2016/08/maven-00.jpg"><link rel="shortcut icon" href="/img/logo.png"><link rel="canonical" href="https://zhao520a1a.github.io/2019/06/12/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7/maven%20%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Maven 实战指南',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-05-05 23:14:20'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.0.0-rc1"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">45</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">13</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://www.somkiat.cc/wp-content/uploads/2016/08/maven-00.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="发光の金子吖"><img class="site-icon" src="/img/logo.png"/><span class="site-name">发光の金子吖</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Maven 实战指南</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2019-06-11T16:00:00.000Z" title="发表于 2019-06-12 00:00:00">2019-06-12</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-05-05T15:14:20.868Z" title="更新于 2023-05-05 23:14:20">2023-05-05</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7/">效率工具</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Maven 实战指南"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><blockquote>
<p>《maven 实战》记得是从二手网店淘到的，已经买了有小半年，还只看了个目录； 打算用个端午的一天时间给它啃下来。。</p>
</blockquote>
<h2 id="maven-规范"><a href="#maven-规范" class="headerlink" title="maven 规范"></a>maven 规范</h2><p>默认情况下：</p>
<ol>
<li>项目主代码位于 src&#x2F;main&#x2F;java 目录下，,编译后在 target&#x2F;classes 下</li>
<li>项目测试代码位于 src&#x2F;test&#x2F;java ,编译后在 target&#x2F;test-class 下。</li>
<li>Maven 构建的所有输入都在 target&#x2F;目录下。</li>
<li>自动访问 Maven 的中央仓库， <a target="_blank" rel="noopener" href="http://repol.maven.org/maven2">http://repol.maven.org/maven2</a></li>
<li>默认打包类型 jar, 主代码打包根据 artifact-version.jar 规则命名打包输出到 target&#x2F;目录下。</li>
<li>在项目根目录下放置 pom.xml</li>
</ol>
<p>注： 如 pom.xml 中的 scope（依赖的范围），默认值是 compile; 如果你看到指定为 test，即：该依赖只对测试代码有效，若在主代码中使用，会造成编译错误。</p>
<h3 id="mvn-clean-compile"><a href="#mvn-clean-compile" class="headerlink" title="mvn clean compile"></a>mvn clean compile</h3><p>背后的执行过程：</p>
<ul>
<li>先执行 clean:clean 任务，展出 target&#x2F;目录。</li>
<li>再执行 resources:resources 任务，处理项目资源。</li>
<li>最后执行 compiler:compile 任务，将项目主代码编译至 target&#x2F;classes 目录。注：上文提及的如 clean:clean …指的是 Maven 的插件和目标，eg: compiler:compile 是 compiler 插件的 complie 目标。</li>
</ul>
<h3 id="mvn-clean-test"><a href="#mvn-clean-test" class="headerlink" title="mvn clean test"></a>mvn clean test</h3><p>背后的执行过程：注： 在执行 test 之前，Maven 先自动执行项目主资源处理、主代码编译、测试资源处理、测试代码编译等工作，是就是 Maven 生命周期的特征。即，会先执行 mvn clean compile 背后的命令操作。</p>
<ul>
<li>先执行 resources:testResources 任务</li>
<li>再执行 compiler:testCompile 任务</li>
<li>最后执行 surefire:test 任务，执行测试并输出测试报告。注：上文提及的如 clean:clean …指的是 Maven 的插件和目标，eg: compiler:compile 是 compiler 插件的 complie 目标。</li>
</ul>
<h3 id="mvn-clean-package"><a href="#mvn-clean-package" class="headerlink" title="mvn clean package"></a>mvn clean package</h3><p>背后的执行过程：执行 jar:jar 任务，负责打 jar 包。</p>
<h3 id="mvn-clean-install"><a href="#mvn-clean-install" class="headerlink" title="mvn clean install"></a>mvn clean install</h3><p>作用：将项目输出的 jar 包安装到 Maven 本地仓库中，供其他 Maven 项目使用。</p>
<h3 id="mvn-archetype-generate"><a href="#mvn-archetype-generate" class="headerlink" title="mvn archetype:generate"></a>mvn archetype:generate</h3><p>使用 Archetype 生成项目骨架，背后的执行过程： Maven2 并不建议用改命令，这可能不是安全的，Maven2 会自动下载最新版本 Archetype 插件，可能不稳定。而 Maven3 会自动下载最新最稳定的版本，所以可以放心使用。Maven2 建议手动指定，命令格式为：mvn groupId:artifactId:version:goal[插件目标], eg：mvn org.apache.maven.plugins:maven-archetype-plugin:2.0-alpha-5:generate</p>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><h3 id="1-为什么-pom-xml-都需要手动配置-compiler-插件呢？"><a href="#1-为什么-pom-xml-都需要手动配置-compiler-插件呢？" class="headerlink" title="1.为什么 pom.xml 都需要手动配置 compiler 插件呢？"></a>1.为什么 pom.xml 都需要手动配置 compiler 插件呢？</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">例如：</span><br><span class="line"><span class="tag">&lt;<span class="name">project</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">bulid</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupIdorg.apache.maven.plugins</span></span></span><br><span class="line"><span class="tag">            &lt;/<span class="attr">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            maven-compiler-plugin</span><br><span class="line">            <span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">source1.8</span>  &lt;/<span class="attr">source</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">target1.8</span> &lt;/<span class="attr">target</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>解： 由于历史原因，Maven 的核心插件之一 compiler 插件默认只支持 Java 1.3，因此需要配置该插件使其支持当前的 JDK 版本。</p>
<h3 id="2-如何生成可执行的-jar-文件？"><a href="#2-如何生成可执行的-jar-文件？" class="headerlink" title="2.如何生成可执行的 jar 文件？"></a>2.如何生成可执行的 jar 文件？</h3><p>注： 默认生成的 jar 包不能直接运行，因为没有将 main 方法的类信息添加到 manifest 中[在 jar 文件中 META-INF&#x2F;MANIFEST.MF 文件中没有 Main-Class 的配置]。需要借助 maven-shade-plugin 插件。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span></span></span><br><span class="line"><span class="tag">&lt;<span class="attr">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-shade-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">phase</span>&gt;</span>package<span class="tag">&lt;/<span class="name">phase</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">goal</span>&gt;</span>shade<span class="tag">&lt;/<span class="name">goal</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- 打成可执行的jar包 的主方法入口--</span></span><br><span class="line"><span class="comment">                &lt;transformer  implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;</span></span><br><span class="line"><span class="comment">                &lt;mainClass&gt;com.golden.MainTest&lt;/mainClass</span></span><br><span class="line"><span class="comment">                &lt;/transformer&gt;</span></span><br><span class="line"><span class="comment">          &lt;/configuration&gt;</span></span><br><span class="line"><span class="comment">        &lt;/execution&gt;</span></span><br><span class="line"><span class="comment">      &lt;/executions&gt;</span></span><br><span class="line"><span class="comment">    &lt;/plugin&gt;</span></span><br><span class="line"><span class="comment"></span></span><br></pre></td></tr></table></figure>

<h2 id="坐标"><a href="#坐标" class="headerlink" title="坐标"></a>坐标</h2><blockquote>
<p>坐标是依赖管理的基础，是构建的唯一标识。</p>
</blockquote>
<p>组成元素： 使用<strong>groupId、artifactId、version、packaging、classifier</strong>标签即可定义一组坐标规定：groupId,artifactId,version 是必须定义的， packaging 的定义是可选的，classifier 是不能直接定义的，而是以后附加的插件帮助生成的。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span> org.sonatype.nexus <span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span> nexus-indexer <span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span> 2.0.0 <span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">packaging</span>&gt;</span> jar <span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="groupId-定义了-Maven-项目隶属的实际项目。"><a href="#groupId-定义了-Maven-项目隶属的实际项目。" class="headerlink" title="groupId: 定义了 Maven 项目隶属的实际项目。"></a>groupId: 定义了 Maven 项目隶属的<u>实际项目</u>。</h3><p>groupId 命名误区：</p>
<ul>
<li>Maven 项目不一定和实际项目一一对应。实际项目可能被划分为多个 Maven 项目</li>
<li>不应该定义到项目隶属的组织或公司级别，因为组织或公司可能有多个项目。</li>
<li>与 java 包名命名方式相似，通常以域名反向对应。</li>
</ul>
<h3 id="artifactId-定义了下实际项目的一个Maven-项目"><a href="#artifactId-定义了下实际项目的一个Maven-项目" class="headerlink" title="artifactId: 定义了下实际项目的一个Maven 项目"></a>artifactId: 定义了下实际项目的一个<u>Maven 项目</u></h3><ul>
<li>建议使用实际项目名作为 artifactId 的前缀。</li>
<li>一般来说，项目中 Java 类的包都应该基于项目的 groupId 和 artifactId.</li>
</ul>
<h3 id="version-定义了-Maven-项目当前所处的版本。"><a href="#version-定义了-Maven-项目当前所处的版本。" class="headerlink" title="version: 定义了 Maven 项目当前所处的版本。"></a>version: 定义了 Maven 项目当前所处的版本。</h3><h3 id="packaging-定义了-Maven-项目的打包方式。"><a href="#packaging-定义了-Maven-项目的打包方式。" class="headerlink" title="packaging: 定义了 Maven 项目的打包方式。"></a>packaging: 定义了 Maven 项目的打包方式。</h3><p>打包方式通常与所生成构件扩展名对应，但是不是绝对的，而且打包方式会影响构建的生命周期。</p>
<h3 id="classifier-定义了构建输出的一些附属构件。如：在包中生成的文档或源代码。"><a href="#classifier-定义了构建输出的一些附属构件。如：在包中生成的文档或源代码。" class="headerlink" title="classifier: 定义了构建输出的一些附属构件。如：在包中生成的文档或源代码。"></a>classifier: 定义了构建输出的一些附属构件。如：在包中生成的文档或源代码。</h3><h2 id="依赖"><a href="#依赖" class="headerlink" title="依赖"></a>依赖</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.validation<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>validation-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.0.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>XXXX<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>XXX<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>每个依赖包含的元素有：</p>
<ul>
<li>groupId,artifactId,version: 依赖的基本坐标</li>
<li>type: 依赖的类型，对应定义坐标时的 packaging,默认值为 jar.</li>
<li>scope: 依赖的范围</li>
<li>optional: 当前依赖是否可选</li>
<li>exclusions: 用来排除传递性依赖</li>
</ul>
<h3 id="依赖范围【scope】"><a href="#依赖范围【scope】" class="headerlink" title="依赖范围【scope】"></a>依赖范围【scope】</h3><p>Maven 有三种 classpath，分别供编译时（编译项目主代码）、测试时（编译和执行测试代码）、运行时（项目实际运行时）使用。依赖范围： 用来控制依赖同三种 classpath 的关系，即：是否将依赖引入相应的 classpath 中。</p>
<table>
<thead>
<tr>
<th>依赖范围（scope）</th>
<th>编译 classpath 生效</th>
<th>测试 classpath 生效</th>
<th>运行时 classpath 生效</th>
<th>栗子</th>
</tr>
</thead>
<tbody><tr>
<td>compile</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>spring-core</td>
</tr>
<tr>
<td>test</td>
<td>N</td>
<td>Y</td>
<td>N</td>
<td>JUit</td>
</tr>
<tr>
<td>provided</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>N</td>
</tr>
<tr>
<td>runtime</td>
<td>N</td>
<td>Y</td>
<td>Y</td>
<td>JDBC 驱动实现</td>
</tr>
<tr>
<td>sytem</td>
<td>Y</td>
<td>Y</td>
<td>N</td>
<td>除本地的 Maven 仓库外的 jar 包</td>
</tr>
</tbody></table>
<ul>
<li>依赖范围不仅可以控制依赖和 classpath 的关系，还对传递性依赖产生影响</li>
<li>可选依赖不能被传递！！！</li>
</ul>
<p>扩展： 为什么要使用可选依赖属性（optional）呢？ eg: 项目 B 进入了 X、Y 的两个可选依赖，一般由业务形态决定的，业务上存在互斥性，用户不可能同时使用 X、Y 的功能。理想情况，其实是不应该使用可选依赖的，本着“单一职责”设计原则，最好分离开来设计。</p>
<h3 id="传递性依赖"><a href="#传递性依赖" class="headerlink" title="传递性依赖"></a>传递性依赖</h3><table>
<thead>
<tr>
<th></th>
<th>compile</th>
<th>test</th>
<th>provided</th>
<th>runtime</th>
</tr>
</thead>
<tbody><tr>
<td>compile</td>
<td>compile</td>
<td>不传递</td>
<td>不传递</td>
<td>runtime</td>
</tr>
<tr>
<td>test</td>
<td>test</td>
<td>不传递</td>
<td>不传递</td>
<td>test</td>
</tr>
<tr>
<td>provided</td>
<td>provied</td>
<td>不传递</td>
<td>provied</td>
<td>provided</td>
</tr>
<tr>
<td>runtime</td>
<td>runtime</td>
<td>不传递</td>
<td>不传递</td>
<td>runtime</td>
</tr>
</tbody></table>
<p>注： 左边第一列是第一直接依赖，最上边一行是第二直接依赖。</p>
<h3 id="依赖调解"><a href="#依赖调解" class="headerlink" title="依赖调解"></a>依赖调解</h3><p>当产生重复依赖冲突时，采用以下原则解决：</p>
<ul>
<li><p>第一原则： 依赖路径最近者优先 eg: 路径 1： A -&gt; B -&gt; C -&gt; X（version:1.0) 路径 2： A -&gt; D -&gt; X（version:2.0) 因此原则，传递性依赖 X（version:2.0)将会被项目引用。</p>
</li>
<li><p>第二原则： 路径长度相同，将由 pom.xml 总依赖声明的顺序决定。 eg: 路径 1： A -&gt; B -&gt; Y（version:1.0) 路径 2： A -&gt; C -&gt; Y（version:2.0) 若 C 的引入顺序在 B 的前面，则 传递性依赖 Y（version:2.0)将会被项目引用。</p>
</li>
</ul>
<h3 id="最佳实践"><a href="#最佳实践" class="headerlink" title="最佳实践"></a>最佳实践</h3><ul>
<li><p>排除依赖： 使用 exclusion 标签定义。</p>
</li>
<li><p>归类依赖： 运用 Maven 属性，使用 properties 元素定义 Maven 属性，并引用即可。</p>
</li>
<li><p>优化依赖：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mvn dependency:list  (以列表方式展示项目依赖列表，包含传递性依赖)</span><br><span class="line">mvn dependency:tree  (以树形结构展示项目依赖列表)</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="仓库"><a href="#仓库" class="headerlink" title="仓库"></a>仓库</h2><p>坐标和依赖是一个构件在 Maven 世界中逻辑表示方式，而构件的物理表示方式就是文件而已，仓库就是统一管理这些文件的地方。</p>
<h3 id="仓库类别"><a href="#仓库类别" class="headerlink" title="仓库类别"></a>仓库类别</h3><ul>
<li>本地仓库</li>
<li>远程仓库: 中仓仓库（自带的默认远程仓库）、私服（一种特殊的远程仓库）、其他</li>
</ul>
<h3 id="仓库路径与坐标的关系"><a href="#仓库路径与坐标的关系" class="headerlink" title="仓库路径与坐标的关系"></a>仓库路径与坐标的关系</h3><p>简而言之，具体的路径根据坐标计算获得；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">通过坐标大致对应的仓库路径如下：</span><br><span class="line">groupId/artifactId/version/artifact-version.packaging</span><br><span class="line">注：阅读Maven源码得出。。</span><br></pre></td></tr></table></figure>

<h3 id="本地仓库"><a href="#本地仓库" class="headerlink" title="本地仓库"></a>本地仓库</h3><p>位置： 在本地机器当前用户目录下 .m2&#x2F;repository 文件夹中。注：当用户输入第一条命令后，Maven 才会创建本地仓库。每个用户只有一个本地仓库。</p>
<h3 id="私服"><a href="#私服" class="headerlink" title="私服"></a>私服</h3><h4 id="存在的意义"><a href="#存在的意义" class="headerlink" title="存在的意义"></a>存在的意义</h4><p>1.节省外网带宽和减少 Maven 构建的时间 2.部署第三方构件 3.提高稳定性、增强控制</p>
<h4 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h4><p>代理所有的外部的远程仓库</p>
<h3 id="中央仓库"><a href="#中央仓库" class="headerlink" title="中央仓库"></a>中央仓库</h3><p>安装的 Maven 自带了中央仓库配置，Maven3 中配置位于$M2_HOME&#x2F;lib&#x2F;maven-model-builder-3.0.jar 里的&#x2F;org&#x2F;apache&#x2F;maven&#x2F;model&#x2F;pom-4.0.0.xml 的文件中，所有的 Maven 项目都会继承这个超级 POM,配置如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>central <span class="tag">&lt;/<span class="name">id</span>&gt;</span>   <span class="comment">&lt;!-- 唯一标识 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span> Maven Repository Switchboard <span class="tag">&lt;/<span class="name">name</span>&gt;</span> <span class="comment">&lt;!-- 仓库名称 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://repo1.maven.org/maven2<span class="tag">&lt;<span class="name">url</span>&gt;</span><span class="comment">&lt;!-- 仓库地址 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">layout</span>&gt;</span>default<span class="tag">&lt;/<span class="name">layout</span>&gt;</span> <span class="comment">&lt;!-- 设置布局 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">enabled</span>&gt;</span> false <span class="tag">&lt;/<span class="name">enabled</span>&gt;</span>  <span class="comment">&lt;!-- 能否从仓库下载快照版本的构件 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">snapshorts</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="仓库配置"><a href="#仓库配置" class="headerlink" title="仓库配置"></a>仓库配置</h3><blockquote>
<p>关键点： 仓库的 ID 的指定, 它是多个配置能关联起来的的纽带。</p>
</blockquote>
<p>仓库配置： 在项目的 pom.xml 中配置仓库认证配置： 在本地 Maven 的 setting.xml 中配置仓库镜像配置：在本地 Maven 的 setting.xml 中配置</p>
<h4 id="仓库配置-1"><a href="#仓库配置-1" class="headerlink" title="仓库配置"></a>仓库配置</h4><p>举个例子：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>jboss <span class="tag">&lt;/<span class="name">id</span>&gt;</span>   <span class="comment">&lt;!-- 唯一标识 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span> JBoss Repository <span class="tag">&lt;/<span class="name">name</span>&gt;</span> <span class="comment">&lt;!-- 仓库名称 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://repository.jobss.com/maven2<span class="tag">&lt;<span class="name">url</span>&gt;</span><span class="comment">&lt;!-- 仓库地址 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">layout</span>&gt;</span>default<span class="tag">&lt;/<span class="name">layout</span>&gt;</span> <span class="comment">&lt;!-- 设置布局 --&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">releases</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">enabled</span>&gt;</span> true <span class="tag">&lt;/<span class="name">enabled</span>&gt;</span>  <span class="comment">&lt;!-- 能否从仓库下载发布版本的构件 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">releases</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">enabled</span>&gt;</span> false <span class="tag">&lt;/<span class="name">enabled</span>&gt;</span>  <span class="comment">&lt;!-- 能否从仓库下载快照版本的构件 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">updatePolicy</span>&gt;</span> daily <span class="tag">&lt;/<span class="name">updatePolicy</span>&gt;</span>&lt;!- 设置从远处仓库检查更新频率，默认值：daily； 可选值：daily,never,always,interval:X --&gt;</span><br><span class="line">            <span class="tag">&lt;<span class="name">checksumPolicy</span>&gt;</span> ignore <span class="tag">&lt;/<span class="name">checksumPolicy</span>&gt;</span><span class="comment">&lt;!-- 设置Maven验证 *校验和文件*的策略，默认值：warn； 可选值：warn,fail,ignore (下载构件时，Maven会验证构件的*校验和文件*，若验证失败改如何处理呢？即使用该配置处理) --&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">snapshorts</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>要特别注意：如果仓库的 ID 命名重复了，新的会覆盖老的仓库配置。</p>
<blockquote>
<p>扩展： 可以使用命令行-U 参数强制让 Maven 检查更新，如 mvn clean install -U ；Maven 就会暂时忽略仓库 updatePolicy 元素的配置。</p>
</blockquote>
<h4 id="仓库认证配置"><a href="#仓库认证配置" class="headerlink" title="仓库认证配置"></a>仓库认证配置</h4><p>举个例子：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servers</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">server</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">id</span>&gt;</span>jboss<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">username</span>&gt;</span>root<span class="tag">&lt;/<span class="name">username</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">password</span>&gt;</span>123456<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">server</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servers</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="镜像配置"><a href="#镜像配置" class="headerlink" title="镜像配置"></a>镜像配置</h4><p>举个例子：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 阿里云镜像 --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus-aliyun<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">name</span>&gt;</span>Nexus aliyun<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span>   <span class="comment">&lt;!-- 镜像仓库所代理仓库的范围，支持指定被镜像的仓库名和排除某些仓库 --&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>啥是镜像仓库？ 如果仓库 X 可以提供仓库 Y 所存储的所有内容，就可以认为仓库 X 是 Y 的一个镜像。</p>
<p>注意： 由于镜像仓库 X<em>完全屏蔽</em>了被镜像的仓库 Y，因此即使镜像仓库 X 挂了，你就废了，懂不，这里被镜像的仓库没吊毛关系的。</p>
<p>部署至远程仓库： <strong>mvn clean deploy</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">在需要上传的工程中的pom.xml文件中加入下面的配置</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">distributionManagement</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">repository</span>&gt;</span>  <span class="comment">&lt;!-- 发布版本仓库 --&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">id</span>&gt;</span>release<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">name</span>&gt;</span>Release Repository<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://ip/nexus/content/repositories/releases<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">snapshotRepository</span>&gt;</span>  <span class="comment">&lt;!--快照版本仓库 --&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">id</span>&gt;</span>snapshot<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">name</span>&gt;</span>Snapshot Repository<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://ip/nexus/content/repositories/snapshots<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">snapshotRepository</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">distributionManagement</span>&gt;</span></span><br><span class="line">或者</span><br><span class="line">使用命令行方式</span><br><span class="line">mvn deploy:deploy-file -DgroupId=groupId -DartifactId=artifactId -Dversion=version -Dfile=本地jar包路径 -DrepositoryId=releases/snapshots -Durl=仓库地址</span><br><span class="line"></span><br><span class="line">举例：上传jmxri-1.2.1.jar，本地存放在D盘</span><br><span class="line">mvn deploy:deploy-file -DgroupId=com.sun.jmx –DartifactId=jmxri -Dversion=1.2.1 -Dfile=d:/jmxri-1.2.1.jar -DrepositoryId=releases -Durl=http://ip/nexus/content/repositories/releases</span><br></pre></td></tr></table></figure>

<blockquote>
<p>规则： 快照版本部署到快照仓库中，其他部署到发布版本仓库中。</p>
</blockquote>
<h3 id="解密仓库解析依赖机制"><a href="#解密仓库解析依赖机制" class="headerlink" title="解密仓库解析依赖机制"></a>解密仓库解析依赖机制</h3><h4 id="基础概念"><a href="#基础概念" class="headerlink" title="基础概念"></a>基础概念</h4><ul>
<li>LATEST 版本：最新版本</li>
<li>RELEASE 版本：最新发布版本</li>
</ul>
<blockquote>
<p>最新的版本号基于元数据：groupId&#x2F;artifactId&#x2F;maven-metadata.xml 计算出来的。</p>
</blockquote>
<ul>
<li>SNAPSHOT 版本：最新的快照版本</li>
</ul>
<blockquote>
<p>最新的版本号基于元数据：groupId&#x2F;artifactId&#x2F;version&#x2F;maven-metadata.xml 计算出来的。在解析前，要先通过元数据计算出最新版本号。</p>
</blockquote>
<h4 id="解析机制"><a href="#解析机制" class="headerlink" title="解析机制"></a>解析机制</h4><ol>
<li>当依赖范围是 system 时，Maven 会直接从本地文件系统解析构件。</li>
<li>构件会先从本地寻找，本地不存在再从远程仓库下载。</li>
<li>如果最后解析得到的构件版本是时间戳格式的快照，则要先转化为非时间戳格式，如：SNAPSHOT 格式，，然后使用非时间戳格式构件。</li>
<li>当构件的版本不明晰时，如 RELEASE、LATEST,SNAPSHOT. Maven 采用最新策略，</li>
</ol>
<blockquote>
<ol>
<li>先基于更新远程仓库的策略来检查更新,决定更新后，需要检查仓库的元数据。</li>
<li>读取所有远程仓库的元数据</li>
<li>然后同本地元数据合并，计算并获得最新的 RELEASE、LATEST,SNAPSHOT 的值</li>
<li>基于该值先从本地获取或者从远程仓库下载</li>
</ol>
</blockquote>
<h3 id="中肯建议"><a href="#中肯建议" class="headerlink" title="中肯建议"></a>中肯建议</h3><ul>
<li><p>不推荐在依赖声明中使用 LATEST 和 RELEASE 版本，特别是 LATEST 版本，存在一定的隐患。注：Maven3 已不在支持在插件配置中使用 LATEST 和 RELEASE，但如果不设置插件版本，其效果同 RELEASE 一样，Maven 只会解析最近的发布版本构件。</p>
</li>
<li><p>项目不应该依赖于任何组织外部的快照版本依赖。</p>
</li>
</ul>
<h2 id="生命周期-amp-插件"><a href="#生命周期-amp-插件" class="headerlink" title="生命周期&amp;插件"></a>生命周期&amp;插件</h2><p>Maven 的生命周期是抽象的，实际行为都有插件来完成，插件以独立的构件形式存在。一个插件往往能够完成多个任务。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">Maven命令 -&gt;&gt; 生命周期阶段:  激活</span><br><span class="line">生命周期阶段 -&gt;&gt; 插件目标:  绑定</span><br></pre></td></tr></table></figure>

<h3 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h3><h4 id="目的"><a href="#目的" class="headerlink" title="目的"></a>目的</h4><p>为了对所有的构建过程进行抽象和统一。</p>
<h4 id="作用-1"><a href="#作用-1" class="headerlink" title="作用"></a>作用</h4><p>制定出通用的构建标准。抽象了构建的各个步骤，定义了它们的次序，但没有具体实现。类比：设计模式中模板方法</p>
<h4 id="插件机制"><a href="#插件机制" class="headerlink" title="插件机制"></a>插件机制</h4><p>每个构建步骤都可以绑定一个或者多个插件行为，而且 Maven 为大多数构建步骤编写并绑定了默认插件。</p>
<h4 id="详解"><a href="#详解" class="headerlink" title="详解"></a>详解</h4><ul>
<li>Mavan 有三套<strong>互相独立</strong>的生命周期，分别是 clean、default 和 site。</li>
<li>周期有阶段组成，阶段是有顺序的，并且后面阶段依赖于前面的阶段。</li>
</ul>
<h4 id="clean"><a href="#clean" class="headerlink" title="clean"></a>clean</h4><ul>
<li>目的： 清理项目</li>
<li>包含阶段： pre-clean、clean、post-clean</li>
</ul>
<h4 id="default"><a href="#default" class="headerlink" title="default"></a>default</h4><ul>
<li>目的： 构建项目</li>
<li>包含的<strong>重要阶段</strong><ul>
<li>process-sources<br>**<em>处理项目主资源文件</em>**：通常是将<u>src&#x2F;main&#x2F;resources</u>目录的内容进行变量替换等工作后，复制到项目输出的主 classpath（一般是 target&#x2F;classes 下）</li>
<li>compile **<em>编译项目的主代码</em>**：通常是将<u>src&#x2F;main&#x2F;java</u>目录的内容进行变量替换等工作后，复制到项目的主 classpath（一般是 target&#x2F;classes 下）</li>
<li>process-test-source **<em>处理项目测试资源文件</em>**：通常是将<u>src&#x2F;test&#x2F;resources</u>目录的内容进行变量替换等工作后，复制到项目输出的测试 classpath(一般是 target&#x2F;test-classes)</li>
<li>test-compile **<em>编译项目的测试代码</em>**：通常是将<u>src&#x2F;test&#x2F;java</u>目录的内容进行变量替换等工作后，复制到项目的主 classpath（一般是 target&#x2F;test-classes 下）</li>
<li>test **<em>使用单元测试框架运行测试</em>**，但测试代码不会被打包或者部署。</li>
<li>package 接受编译好的代码，**<em>打包成可发布的格式</em>**，如 JAR。</li>
<li>install **<em>将包安装到本地仓库</em>**，供本地其他 Maven 项目使用。</li>
<li>deploy **<em>将最终的包复制到远程仓库</em>**，供其他 Maven 项目使用。</li>
</ul>
</li>
</ul>
<h4 id="site"><a href="#site" class="headerlink" title="site"></a>site</h4><ul>
<li>目的： 建立和发布项目站点，基于 POM 所包含的信息，自动生一个友好站点，用于团队交流和发布项目信息。</li>
<li>包含阶段： pre-site、site、post-site、site-deploy</li>
</ul>
<h3 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h3><h4 id="插件目标"><a href="#插件目标" class="headerlink" title="插件目标"></a>插件目标</h4><p>往往一个插件有多个目标，每个目标对应一个功能。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">compiler:compile (compiler是插件前缀，commpile是插件目标。即：maven-compiler-plugin的compile目标)</span><br></pre></td></tr></table></figure>

<h4 id="插件绑定"><a href="#插件绑定" class="headerlink" title="插件绑定"></a>插件绑定</h4><p>生命周期的阶段 与 插件的目标 互相绑定，已完成某个具体的构件任务。</p>
<h4 id="内置绑定"><a href="#内置绑定" class="headerlink" title="内置绑定"></a>内置绑定</h4><p>Maven 为主要的生命周期阶段 绑定了 很多插件的目标； eg:</p>
<table>
<thead>
<tr>
<th>生命周期阶段</th>
<th>插件目标</th>
</tr>
</thead>
<tbody><tr>
<td>clean</td>
<td>maven-clean-plugin:clean</td>
</tr>
<tr>
<td>site</td>
<td>maven-site-plugin:site</td>
</tr>
<tr>
<td>site-deploy</td>
<td>maven-site-plugin:deploy</td>
</tr>
</tbody></table>
<p>由于项目的打包类型会影响构建的具体过程，defalut 生命周期与插件目标的绑定关系有项目打包类型决定。</p>
<blockquote>
<p>注：defalut 还有很多阶段没有绑定任何插件，因此也没有任何实际行为。</p>
</blockquote>
<h4 id="自定义绑定"><a href="#自定义绑定" class="headerlink" title="自定义绑定"></a>自定义绑定</h4><p>自定义将某个插件的目标绑定到生命周期的某个阶段上，令在构建过程中执行更多更丰富的任务。自定义绑定：创建项目的源码 jar 包。需在 POM 添加如下配置信息：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-source-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">id</span>&gt;</span>attach-sources<span class="tag">&lt;/<span class="name">id</span>&gt;</span>  <span class="comment">&lt;!-- 任务ID --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">phase</span>&gt;</span>verify<span class="tag">&lt;/<span class="name">phase</span>&gt;</span>  <span class="comment">&lt;!-- 要绑定的阶段 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">goal</span>&gt;</span>jar-no-fork<span class="tag">&lt;/<span class="name">goal</span>&gt;</span> <span class="comment">&lt;!-- 执行的插件目标 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">验证： mvn verify</span><br><span class="line">在日志中会发现该插件目标执行的信息，即证明配置已生效。</span><br></pre></td></tr></table></figure>

<p>注： 如果你删除 phase 一行的配置，会发现执行依旧生效。 这种现象的原因是：很多插件在编写目标时已经定义了默认绑定阶段。</p>
<p>了解插件目标默认绑定的阶段：使用 maven-help-plugin 阶段，具体运行命令如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mvm help:describe -Dplugin = org.apache.maven.plugins:maven-source-plugin:2.1.1 -Ddetail</span><br><span class="line">注：查看打印信息中”Bound to phase“这一项即可知道。</span><br></pre></td></tr></table></figure>

<p>当多个插件目标绑定到同一个阶段时，插件们的声明顺序决定了目标的执行顺序。</p>
<h4 id="插件配置"><a href="#插件配置" class="headerlink" title="插件配置"></a>插件配置</h4><h4 id="命令行插件配置"><a href="#命令行插件配置" class="headerlink" title="命令行插件配置"></a>命令行插件配置</h4><p>在 Maven 命令中使用-D 参数，并伴随 一个参数键&#x3D;参数值 的形式，来配置插件目标的参数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn install -Dmaven.test.skip = <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>注：参数-D 是 Java 自带的，其功能是通过命令行设置一个 Java 系统属性，Maven 重用了该参数，在准备插件时检查系统自带属性，变实现了插件参数的配置。</p>
<h4 id="POM-中插件全局参数配置"><a href="#POM-中插件全局参数配置" class="headerlink" title="POM 中插件全局参数配置"></a>POM 中插件全局参数配置</h4><p>在 POM 中全局配置 compiler 插件，告诉项目编译指定 JDK 版本源文件，生成指定 JDK 版本字节码文件。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span> org.apache.maven.plugins</span><br><span class="line">    <span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    maven-compiler-plugin</span><br><span class="line">    <span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">source</span>&gt;</span> 1.8  <span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">target</span>&gt;</span> 1.8 <span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>扩展： 在配置插件的时候，如果插件是 Maven 官方插件（即：groupId 为 <strong>org.apache.maven.plugins</strong> ）,可以省略 groupId 配置。Maven 解析插件时会自动补全。 【并不推荐】</p>
<h4 id="POM-中插件任务配置"><a href="#POM-中插件任务配置" class="headerlink" title="POM 中插件任务配置"></a>POM 中插件任务配置</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-source-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">executions</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">execution</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">id</span>&gt;</span>attach-sources<span class="tag">&lt;/<span class="name">id</span>&gt;</span>  <span class="comment">&lt;!-- 任务ID --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">phase</span>&gt;</span>verify<span class="tag">&lt;/<span class="name">phase</span>&gt;</span>  <span class="comment">&lt;!-- 要绑定的阶段 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">goals</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">goal</span>&gt;</span>jar-no-fork<span class="tag">&lt;/<span class="name">goal</span>&gt;</span> <span class="comment">&lt;!-- 执行的插件目标 --&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">goals</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 插件任务配置如下 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">tasks</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">echo</span>&gt;</span> I&#x27;m bound to validate phase. <span class="tag">&lt;/<span class="name">echo</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tasks</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="tag">&lt;/<span class="name">execution</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">executions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="命令行调用生命周期、插件"><a href="#命令行调用生命周期、插件" class="headerlink" title="命令行调用生命周期、插件"></a>命令行调用生命周期、插件</h4><p>命令行执行 Maven 任务方式：</p>
<ul>
<li>调用 Maven 的生命周期阶段 【最主要的方式】 【内部机制：mvn 命令激活生命周期阶段，从而执行绑定在阶段上的插件目标。】</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn clean  (调用的是clean生命周期的clean阶段，实际执行阶段为clean生命周期的pre-clean、clean阶段)</span><br></pre></td></tr></table></figure>

<ul>
<li>调用插件目标语法 1： mvn [groupId]:[artifactId]:[version]:[插件目标] 为了方便在命令行直接运行插件，Maven 引入插件前缀的概念，替换了原本的坐标。语法 2： mvn [插件前缀]:[插件目标]</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># dependency 就是 org.apache.maven.plugins:maven-dependency-plugin:2.1的插件前缀</span></span><br><span class="line">mvn dependency:tree</span><br></pre></td></tr></table></figure>

<p>思考：</p>
<ul>
<li><p>什么 Maven 要支持从命令行调用插件目标？主要是有些任务不太适合绑定在生命周期上，如描述构件信息(mvn help:descirbe -Dplugin&#x3D;complier)、显示依赖树（mvn dependency:tree）等任务。</p>
</li>
<li><p>Maven 引入插件前缀的概念，替换了原本的坐标。那 Maven 内部是如何解析插件前缀，获取插件的 groupId、artifactId、version 的呢？ 请往下看。。。</p>
</li>
</ul>
<h4 id="插件解析机制"><a href="#插件解析机制" class="headerlink" title="插件解析机制"></a>插件解析机制</h4><h4 id="插件仓库"><a href="#插件仓库" class="headerlink" title="插件仓库"></a>插件仓库</h4><ol>
<li>插件构件同样基于坐标存储在 Maven 仓库中。</li>
<li>Maven 会区别对待远程的依赖仓库和插件仓库,如当需要的插件不在本地仓库时，是不会去远程仓库查找的。</li>
<li>Maven 默认配置的插件中央仓库完全可以满足日常需要，但是也可以在 POM 或者 setting.xml 使用 <pluginRepositories> 和 <pluginRepository>配置自己的远程仓库，其子元素的配置同依赖的远程仓库配置完全一样。</pluginRepository></pluginRepositories></li>
</ol>
<h4 id="解析插件-version"><a href="#解析插件-version" class="headerlink" title="解析插件 version"></a>解析插件 version</h4><p>首先 Maven 在超级 POM 中为所有<strong>核心插件</strong>设定了版本。</p>
<p>若用户在是使用某个插件时没有设定版本，怎么办呢？</p>
<ol>
<li>若插件属于核心插件范畴，使用 Maven 超级 POM 中的版本。</li>
<li>若插件属于核心插件范畴，Maven 会检查所有仓库中可用的版本，然后做出选择。使用 Maven2 插件版本会被解析至 latest,使用 Maven3 插件版本会被解析至 release. 基于如上规则,在使用插件时，强烈建议显示指定版本。</li>
</ol>
<h4 id="解析插件前缀"><a href="#解析插件前缀" class="headerlink" title="解析插件前缀"></a>解析插件前缀</h4><p>插件前缀是与坐标中的 groupId:artifactId 是一一对应的，其匹配关系存储在仓库元数据，这里的仓库元数据指的是仓库中的[groupId]&#x2F;maven-metadate.xml 文件，这里的 groupId 默认使用 org.apache.maven.plugins 和 org.codehaus.mojo 两个 groupId ,当然也可以通过 setting.xml 配置其他的 groupId。命令行 mvn dependency:tree 的解析过程如下：</p>
<ol>
<li>基于默认的一个 groupId 归并所有插件仓库的元数据,如 org&#x2F;apache&#x2F;maven&#x2F;plugins&#x2F;maven-metadata.xml。</li>
<li>检查元数据，若能获得对应的插件的 artifactId 值，结合之前所说解析插件 version 的方法获得到插件 version，就可以得到完整的插件坐标了。若没能或者，则检查其他 groupId 下元数据。直到得到结果。</li>
</ol>
<h4 id="插件信息"><a href="#插件信息" class="headerlink" title="插件信息"></a>插件信息</h4><h4 id="在线网站获取"><a href="#在线网站获取" class="headerlink" title="在线网站获取"></a>在线网站获取</h4><ul>
<li>基本主要的插件都来自 Apache 和 Codehaus. <a target="_blank" rel="noopener" href="https://maven.apache.org/plugins/index.html">Apache 插件信息</a></li>
</ul>
<h4 id="maven-help-plugin-插件获取"><a href="#maven-help-plugin-插件获取" class="headerlink" title="maven-help-plugin 插件获取"></a>maven-help-plugin 插件获取</h4><blockquote>
<p>语法 1： mvn help:describe -Dplugin&#x3D;[groupId]:[artifactId]:[version] -Dgoal&#x3D;[插件目标] -Ddetail</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvm help:describe -Dplugin = org.apache.maven.plugins:maven-source-plugin:2.1.1 -Ddetail</span><br></pre></td></tr></table></figure>

<blockquote>
<p>语法 2： mvn help:describe -Dplugin&#x3D;[插件前缀] -Dgoal&#x3D;[插件目标] -Ddetail</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvm <span class="built_in">help</span>:describe -Dplugin = compiler</span><br></pre></td></tr></table></figure>

<h4 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h4><p>常用插件介绍： <a target="_blank" rel="noopener" href="https://www.cnblogs.com/crazy-fox/archive/2012/02/09/2343722.html">https://www.cnblogs.com/crazy-fox/archive/2012/02/09/2343722.html</a></p>
<p>注意区分指定场景下仓库的元数据不同！！插件前缀-插件 仓库元数据（即： [groupId]&#x2F;maven-metadate.xml 文件）依赖&#x2F;插件版本 仓库元数据（即： [groupId]&#x2F;[artifactId]&#x2F;maven-metadate.xml 文件）</p>
<h2 id="聚合-amp-继承"><a href="#聚合-amp-继承" class="headerlink" title="聚合&amp;继承"></a>聚合&amp;继承</h2><p>聚合和继承是两个完全不同的概念</p>
<ul>
<li><p>聚合主要是为了方便构建项目</p>
</li>
<li><p>继承主要是为了消除重复配置。相同点：除了 POM 之外都没有实际内容，<u>packaging 都必须是 pom</u>。为了方便，一个 POM 可以即是聚合 POM,又是用于继承的父 POM</p>
<p>. <img src="/2019/06/12/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7/maven%20%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97/g" alt="4.gif" style="zoom:67%;"></p>
</li>
</ul>
<h3 id="聚合"><a href="#聚合" class="headerlink" title="聚合"></a>聚合</h3><ol>
<li>每个 module 的值都是一个当前 POM 的<strong>相对目录名</strong>。</li>
<li>Maven 构建输出日志中会显示各模块的名称，而不是 artifactId。因此为了让输出日志更清晰，需要在 POM 中 name 字段是为了给项目提供一个更容易阅读的名字。</li>
<li>为了方便快速定位内容，模块所处的目录名称应当与 artifactId 一致，但是不是必须的。</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.juvenxu.mvnbook.account<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>account-aggregator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span> pom <span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>Account Aggregator<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">modules</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>account-email<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>account-persist<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">modules</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># 父POM如下：</span><br><span class="line"><span class="tag">&lt;<span class="name">project</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.juvenxu.mvnbook.account<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span> account-parent <span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>Account Parent<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br><span class="line"></span><br><span class="line"># 子POM如下：</span><br><span class="line"><span class="tag">&lt;<span class="name">project</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    &lt; parent &gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.juvenxu.mvnbook.account<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span> account-parent <span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        &lt; relativePath &gt;../account-parent/pom.xml&lt;/ relativePath&gt;</span><br><span class="line">    &lt;/ parent &gt;</span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span> account-email <span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>Account Email<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>注意： 1、子模块没有声明 groupId 和 version, 这两个属性继承至父模块。但如果子模块有不同与父模块的 groupId、version ，也可指定； 2、不应该继承 artifactId,如果 groupId ，version，artifactId 完全继承的话会造成坐标冲突；另外即使使用不同的 groupId 或 version，同样的 artifactId 也容易产生混淆。 3、使用继承后 parent 也必须像自模块一样加入到聚合模块中。</p>
<p>Maven 可继承的 POM 元素:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">groupId ：项目组 ID ，项目坐标的核心元素；</span><br><span class="line">version ：项目版本，项目坐标的核心元素；</span><br><span class="line">description ：项目的描述信息；</span><br><span class="line">organization ：项目的组织信息；</span><br><span class="line">inceptionYear ：项目的创始年份；</span><br><span class="line">url ：项目的 url 地址</span><br><span class="line">develoers ：项目的开发者信息；</span><br><span class="line">contributors ：项目的贡献者信息；</span><br><span class="line">distributionManagerment ：项目的部署信息；</span><br><span class="line">issueManagement ：缺陷跟踪系统信息；</span><br><span class="line">ciManagement ：项目的持续继承信息；</span><br><span class="line">scm ：项目的版本控制信息；</span><br><span class="line">mailingListserv ：项目的邮件列表信息；</span><br><span class="line">properties ：自定义的 Maven 属性；</span><br><span class="line">dependencies ：项目的依赖配置；</span><br><span class="line">dependencyManagement ：醒目的依赖管理配置；</span><br><span class="line">repositories ：项目的仓库配置；</span><br><span class="line">build ：包括项目的源码目录配置、输出目录配置、插件配置、插件管理配置等；</span><br><span class="line">reporting ：包括项目的报告输出目录配置、报告插件配置等。</span><br></pre></td></tr></table></figure>

<h3 id="核心设计理念"><a href="#核心设计理念" class="headerlink" title="核心设计理念"></a>核心设计理念</h3><p>提倡“约定大于配置“，遵循约定能够帮助用户遵守构建标准。</p>
<p>约定的由来：Maven 超级 POM(定义了仓库和构件仓库，项目的各种输出目录、构件名称格式，核心插件版本等。)</p>
<h3 id="反应堆"><a href="#反应堆" class="headerlink" title="反应堆"></a>反应堆</h3><h4 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h4><p>反应堆指所有模块组成的一个构建结构。它包含了个模块之间<strong>继承与依赖的关系</strong>，从而能自动计算出合理的<strong>模块构建顺序</strong>。</p>
<h4 id="依赖关系与构建顺序"><a href="#依赖关系与构建顺序" class="headerlink" title="依赖关系与构建顺序"></a>依赖关系与构建顺序</h4><p>模块间的依赖关系将反应堆构成了一个 有向非循环图（DAG），依赖关系构成有向边。不允许出现循环。</p>
<h4 id="剪裁反应堆"><a href="#剪裁反应堆" class="headerlink" title="剪裁反应堆"></a>剪裁反应堆</h4><p>输入 mvn -h 可以看到剪裁反应堆的</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-am  // alse-make 同时构建所列模块的依赖模块</span><br><span class="line">-amd //alse-make-dependents 同时构建依赖于所列模块的模块，同am相反</span><br><span class="line">-pl  &lt;args&gt;// projects 构建指定模块，模块用逗号分隔</span><br><span class="line">-rf  &lt;args&gt;  //reusme-from 从指定的模板回复反应堆</span><br></pre></td></tr></table></figure>



<h2 id="搭建私服-Nexus"><a href="#搭建私服-Nexus" class="headerlink" title="搭建私服 Nexus"></a>搭建私服 Nexus</h2><h3 id="安装Nexus"><a href="#安装Nexus" class="headerlink" title="安装Nexus"></a>安装Nexus</h3><p>下载地址：<a target="_blank" rel="noopener" href="https://www.sonatype.com/download-oss-sonatype">https://www.sonatype.com/download-oss-sonatype</a></p>
<p>有两种安装包</p>
<ul>
<li>包含Jetrt容器的Bundle包</li>
<li>不包含Webr容器的war包</li>
</ul>
<h4 id="备份Nexus"><a href="#备份Nexus" class="headerlink" title="备份Nexus"></a>备份Nexus</h4><p>Bundle包下有2个目录，注意当用户需要备份特定配置时，只需要备份sonatype-work&#x2F;目录即可（包含了Nexus生成的配置文件、日志文件、仓库文件等）。nexus-webappp-x.x.x 下内容客户可以从安装包直接获得。而sonatype-work&#x2F;目录是运行时自动生成的，不同的用户在不同机器上使用Nexus会有不同，因此备份它即可。</p>
<h4 id="常用命令与配置"><a href="#常用命令与配置" class="headerlink" title="常用命令与配置"></a>常用命令与配置</h4><h5 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">./nexus start</span><br><span class="line">./nexus stop</span><br><span class="line">./nexus restart</span><br><span class="line">./nexus status</span><br></pre></td></tr></table></figure>
<h5 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h5><p>默认管理用户名与密码： admin&#x2F;admin123<br>修改Nexus的端口：位置 conf&#x2F;pluxus.properties 中的application-port属性值。</p>
<h3 id="仓库与仓库组"><a href="#仓库与仓库组" class="headerlink" title="仓库与仓库组"></a>仓库与仓库组</h3><h4 id="仓库类型"><a href="#仓库类型" class="headerlink" title="仓库类型"></a>仓库类型</h4><ul>
<li>group （仓库组）</li>
<li>hosted（宿主仓库）</li>
<li>proxy（代理仓库）</li>
<li>vitual（虚拟仓库）- 作用：为了服务Maven1格式，动态将仓库内容格式转换。</li>
</ul>
<p>仓库有个名为Policy（策略）的属性，决定该仓库是Release（发布）版本仓库还是Snapshot（快照）版本仓库。</p>
<img src="/2019/06/12/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7/maven%20%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97/8FC08FD7-2892-4A66-A489-0E2B8181F925-3299110-3299205.png" alt="img" style="zoom:75%;"> 

<h4 id="内置的仓库列表"><a href="#内置的仓库列表" class="headerlink" title="内置的仓库列表"></a>内置的仓库列表</h4><img src="/2019/06/12/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7/maven%20%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97/Maven-3299225.png" alt="img" style="zoom:80%;">

 <img src="/2019/06/12/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7/maven%20%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97/670A2152-3F8E-4ECE-8DE3-59C003D79DFB-3299238.png" alt="img" style="zoom:75%;">

<h4 id="新建宿主仓库页面："><a href="#新建宿主仓库页面：" class="headerlink" title="新建宿主仓库页面："></a>新建宿主仓库页面：</h4><img src="/2019/06/12/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7/maven%20%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97/05C52087-BF5C-40F2-9FC3-3BF603226334-3299252.png" alt="img" style="zoom:75%;">

<img src="/2019/06/12/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7/maven%20%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97/AD70F31E-C05F-4BE4-914A-549DBFE66D0B-3299263.png" alt="img" style="zoom:67%;">

<h4 id="新建代理仓库页面："><a href="#新建代理仓库页面：" class="headerlink" title="新建代理仓库页面："></a>新建代理仓库页面：</h4><img src="/2019/06/12/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7/maven%20%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97/CAD796ED-BB07-4074-9499-F85B629CA061-3299302.png" alt="img" style="zoom:75%;">

<img src="/2019/06/12/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7/maven%20%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97/DE114ABF-F74B-4386-8EB0-4712ABA9A2DD.png" alt="img" style="zoom:75%;">

<img src="/2019/06/12/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7/maven%20%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97/DE114ABF-F74B-4386-8EB0-4712ABA9A2DD-3299325.png" alt="img" style="zoom:67%;">

<h4 id="新建仓库组页面："><a href="#新建仓库组页面：" class="headerlink" title="新建仓库组页面："></a>新建仓库组页面：</h4><img src="/2019/06/12/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7/maven%20%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97/5B22885A-207D-41B7-8FB5-B293E924032E.png" alt="img" style="zoom:75%;">

<img src="/2019/06/12/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7/maven%20%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97/24EB218D-CA11-49EA-B67F-1AACBADE5BE7.png" alt="img" style="zoom:75%;">


<h3 id="索引与搜索构件"><a href="#索引与搜索构件" class="headerlink" title="索引与搜索构件"></a>索引与搜索构件</h3><h3 id="从Nexus下载构件"><a href="#从Nexus下载构件" class="headerlink" title="从Nexus下载构件"></a>从Nexus下载构件</h3><ol>
<li>单独项目配置（仅对当前项目生效，在pom如下定义）<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>Nexus<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://localhost/nexus-2.11/content/groups/public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">releases</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">releases</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span>    </span><br><span class="line">    <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">pluginRepositories</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">pluginRepository</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>Nexus<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://localhost/nexus-2.11/content/groups/public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">releases</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">releases</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">pluginRepository</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">pluginRepositories</span>&gt;</span></span><br><span class="line">  ````</span><br><span class="line">  2、此电脑所有项目都默认从私服下载，需要改settings.xml<span class="tag">&lt;<span class="name">profiles</span>&gt;</span></span><br><span class="line">  ```xml</span><br><span class="line">   <span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">name</span>&gt;</span>Nexus<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://localhost/nexus-2.11/content/groups/public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">releases</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">releases</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">pluginRepositories</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pluginRepository</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">name</span>&gt;</span>Nexus<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://localhost/nexus-2.11/content/groups/public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">releases</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">releases</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>true<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">pluginRepository</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">pluginRepositories</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 每次建立maven都默认是jdk1.5的，此配置可以让建立maven项目默认jdk为1.7 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>jdk-1.7<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activation</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">activeByDefault</span>&gt;</span>true<span class="tag">&lt;/<span class="name">activeByDefault</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">jdk</span>&gt;</span>1.7<span class="tag">&lt;/<span class="name">jdk</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">activation</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.7<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.7<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">maven.compiler.compilerVersion</span>&gt;</span>1.7<span class="tag">&lt;/<span class="name">maven.compiler.compilerVersion</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">profiles</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 激活nexus的profile --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">activeProfiles</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">activeProfile</span>&gt;</span>nexus<span class="tag">&lt;/<span class="name">activeProfile</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">activeProfiles</span>&gt;</span></span><br><span class="line">  ````</span><br><span class="line">说明：这个配置已经能让本机所有的maven项目从Nexus下载构件，但Maven还会不时地访问中央仓库centeral，可以配置一个镜像，地址为私服，这样maven对任何仓库的构件下载请求都会转到私服中，如下配置</span><br><span class="line">  ```xml</span><br><span class="line">  <span class="tag">&lt;<span class="name">mirrors</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>*<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>Nexus<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://localhost/nexus-2.11/content/groups/public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">mirrors</span>&gt;</span></span><br><span class="line">  ````</span><br><span class="line"></span><br><span class="line">### 部署构件至Nexus</span><br><span class="line">两种方式：</span><br><span class="line">1. 通过nexus网页手动上传（自行百度）适用于第三方jar上传到n exus，比如oracle驱动。</span><br><span class="line">2. 配置方式（自己内部项目打成包上传到nexus，供其他项目使用）,下面介绍的就是这种方式</span><br><span class="line"></span><br><span class="line">一.   先在settings.xml中配置私服用户名密码</span><br><span class="line">```xml</span><br><span class="line"><span class="tag">&lt;<span class="name">servers</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--发布版 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">server</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus-realease<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">username</span>&gt;</span>admin<span class="tag">&lt;/<span class="name">username</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">password</span>&gt;</span>admin123<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">server</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--快照版 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">server</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus-snapshots<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">username</span>&gt;</span>admin<span class="tag">&lt;/<span class="name">username</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">password</span>&gt;</span>admin123<span class="tag">&lt;/<span class="name">password</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">server</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servers</span>&gt;</span></span><br></pre></td></tr></table></figure>
二.  在项目中pom定义如下<distributionManagement>  <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">distributionManagement</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 发布版 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">            &lt;!—id与settings.xml发布版一致 --&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus-release<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>Nexus Release Repository<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://localhost/nexus-2.11/content/repositories/releases/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 快照版 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">snapshotRepository</span>&gt;</span></span><br><span class="line">            &lt;!—id与settings.xml快照版一致 --&gt;</span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>nexus-snapshots<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>Nexus Snapshots Repository<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://localhost/nexus-2.11/content/repositories/snapshots/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">snapshotRepository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">distributionManagement</span>&gt;</span></span><br></pre></td></tr></table></figure>
  三.  发布方式：配置好后，运行maven的deploy命令即可打包上传到nexus。</distributionManagement></li>
</ol>
<h3 id="权限管理"><a href="#权限管理" class="headerlink" title="权限管理"></a>权限管理</h3><h3 id="调度任务"><a href="#调度任务" class="headerlink" title="调度任务"></a>调度任务</h3></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://zhao520a1a.github.io">Golden</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://zhao520a1a.github.io/2019/06/12/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7/maven%20%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97/">https://zhao520a1a.github.io/2019/06/12/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7/maven%20%E5%AE%9E%E6%88%98%E6%8C%87%E5%8D%97/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://zhao520a1a.github.io" target="_blank">发光の金子吖</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/maven/">maven</a></div><div class="post_share"><div class="social-share" data-image="https://www.somkiat.cc/wp-content/uploads/2016/08/maven-00.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2019/08/01/%E5%86%85%E9%83%A8%E5%8E%9F%E7%90%86/Java/Java%20HashMap%20%E5%86%85%E9%83%A8%E5%8E%9F%E7%90%86/" title="Java HashMap 内部原理"><img class="cover" src="https://1.bp.blogspot.com/-7qlGiyxNuGc/Xd0UQjr3jBI/AAAAAAAAGj8/VqXHcWZ_WYUv13QLBzbIOBRv2bXL3Wn6ACPcBGAYYCw/s1600/How%2BHashMap%2BWorks%2BInternally%2Bin%2BJava.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Java HashMap 内部原理</div></div></a></div><div class="next-post pull-right"><a href="/2019/05/01/%E5%86%85%E9%83%A8%E5%8E%9F%E7%90%86/Java/JVM%E5%86%85%E9%83%A8%E6%9C%BA%E5%88%B6/" title="JVM内部机制"><img class="cover" src="https://i.ytimg.com/vi/G1ubVOl9IBw/maxresdefault.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">JVM内部机制</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Golden</div><div class="author-info__description">一个乐观的悲观主义者</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">45</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">13</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://space.bilibili.com/334383730"><i class="fab fa-bilibili"></i><span>关注一下</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/zhao520a1a" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://space.bilibili.com/334383730" target="_blank" title="B 站"><i class="fab fa-bilibili"></i></a><a class="social-icon" href="https://zhao520a1a.github.io/about/index/qrCode.png" target="_blank" title="微信公众号"><i class="fab fa-weixin"></i></a><a class="social-icon" href="https://www.processon.com/u/5ab9cb2de4b018c271cab8d4/profile" target="_blank" title="ProcessOn"><i class="far fa-lightbulb"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">喜欢即可关注，关注即可进步，OVER!</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#maven-%E8%A7%84%E8%8C%83"><span class="toc-number">1.</span> <span class="toc-text">maven 规范</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#mvn-clean-compile"><span class="toc-number">1.1.</span> <span class="toc-text">mvn clean compile</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mvn-clean-test"><span class="toc-number">1.2.</span> <span class="toc-text">mvn clean test</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mvn-clean-package"><span class="toc-number">1.3.</span> <span class="toc-text">mvn clean package</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mvn-clean-install"><span class="toc-number">1.4.</span> <span class="toc-text">mvn clean install</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mvn-archetype-generate"><span class="toc-number">1.5.</span> <span class="toc-text">mvn archetype:generate</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98"><span class="toc-number">2.</span> <span class="toc-text">常见问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%B8%BA%E4%BB%80%E4%B9%88-pom-xml-%E9%83%BD%E9%9C%80%E8%A6%81%E6%89%8B%E5%8A%A8%E9%85%8D%E7%BD%AE-compiler-%E6%8F%92%E4%BB%B6%E5%91%A2%EF%BC%9F"><span class="toc-number">2.1.</span> <span class="toc-text">1.为什么 pom.xml 都需要手动配置 compiler 插件呢？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%A6%82%E4%BD%95%E7%94%9F%E6%88%90%E5%8F%AF%E6%89%A7%E8%A1%8C%E7%9A%84-jar-%E6%96%87%E4%BB%B6%EF%BC%9F"><span class="toc-number">2.2.</span> <span class="toc-text">2.如何生成可执行的 jar 文件？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9D%90%E6%A0%87"><span class="toc-number">3.</span> <span class="toc-text">坐标</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#groupId-%E5%AE%9A%E4%B9%89%E4%BA%86-Maven-%E9%A1%B9%E7%9B%AE%E9%9A%B6%E5%B1%9E%E7%9A%84%E5%AE%9E%E9%99%85%E9%A1%B9%E7%9B%AE%E3%80%82"><span class="toc-number">3.1.</span> <span class="toc-text">groupId: 定义了 Maven 项目隶属的实际项目。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#artifactId-%E5%AE%9A%E4%B9%89%E4%BA%86%E4%B8%8B%E5%AE%9E%E9%99%85%E9%A1%B9%E7%9B%AE%E7%9A%84%E4%B8%80%E4%B8%AAMaven-%E9%A1%B9%E7%9B%AE"><span class="toc-number">3.2.</span> <span class="toc-text">artifactId: 定义了下实际项目的一个Maven 项目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#version-%E5%AE%9A%E4%B9%89%E4%BA%86-Maven-%E9%A1%B9%E7%9B%AE%E5%BD%93%E5%89%8D%E6%89%80%E5%A4%84%E7%9A%84%E7%89%88%E6%9C%AC%E3%80%82"><span class="toc-number">3.3.</span> <span class="toc-text">version: 定义了 Maven 项目当前所处的版本。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#packaging-%E5%AE%9A%E4%B9%89%E4%BA%86-Maven-%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%89%93%E5%8C%85%E6%96%B9%E5%BC%8F%E3%80%82"><span class="toc-number">3.4.</span> <span class="toc-text">packaging: 定义了 Maven 项目的打包方式。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#classifier-%E5%AE%9A%E4%B9%89%E4%BA%86%E6%9E%84%E5%BB%BA%E8%BE%93%E5%87%BA%E7%9A%84%E4%B8%80%E4%BA%9B%E9%99%84%E5%B1%9E%E6%9E%84%E4%BB%B6%E3%80%82%E5%A6%82%EF%BC%9A%E5%9C%A8%E5%8C%85%E4%B8%AD%E7%94%9F%E6%88%90%E7%9A%84%E6%96%87%E6%A1%A3%E6%88%96%E6%BA%90%E4%BB%A3%E7%A0%81%E3%80%82"><span class="toc-number">3.5.</span> <span class="toc-text">classifier: 定义了构建输出的一些附属构件。如：在包中生成的文档或源代码。</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96"><span class="toc-number">4.</span> <span class="toc-text">依赖</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96%E8%8C%83%E5%9B%B4%E3%80%90scope%E3%80%91"><span class="toc-number">4.1.</span> <span class="toc-text">依赖范围【scope】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%A0%E9%80%92%E6%80%A7%E4%BE%9D%E8%B5%96"><span class="toc-number">4.2.</span> <span class="toc-text">传递性依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96%E8%B0%83%E8%A7%A3"><span class="toc-number">4.3.</span> <span class="toc-text">依赖调解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="toc-number">4.4.</span> <span class="toc-text">最佳实践</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%93%E5%BA%93"><span class="toc-number">5.</span> <span class="toc-text">仓库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%93%E5%BA%93%E7%B1%BB%E5%88%AB"><span class="toc-number">5.1.</span> <span class="toc-text">仓库类别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%93%E5%BA%93%E8%B7%AF%E5%BE%84%E4%B8%8E%E5%9D%90%E6%A0%87%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-number">5.2.</span> <span class="toc-text">仓库路径与坐标的关系</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%AC%E5%9C%B0%E4%BB%93%E5%BA%93"><span class="toc-number">5.3.</span> <span class="toc-text">本地仓库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A7%81%E6%9C%8D"><span class="toc-number">5.4.</span> <span class="toc-text">私服</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%98%E5%9C%A8%E7%9A%84%E6%84%8F%E4%B9%89"><span class="toc-number">5.4.1.</span> <span class="toc-text">存在的意义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%9C%E7%94%A8"><span class="toc-number">5.4.2.</span> <span class="toc-text">作用</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AD%E5%A4%AE%E4%BB%93%E5%BA%93"><span class="toc-number">5.5.</span> <span class="toc-text">中央仓库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%93%E5%BA%93%E9%85%8D%E7%BD%AE"><span class="toc-number">5.6.</span> <span class="toc-text">仓库配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%93%E5%BA%93%E9%85%8D%E7%BD%AE-1"><span class="toc-number">5.6.1.</span> <span class="toc-text">仓库配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%93%E5%BA%93%E8%AE%A4%E8%AF%81%E9%85%8D%E7%BD%AE"><span class="toc-number">5.6.2.</span> <span class="toc-text">仓库认证配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%95%9C%E5%83%8F%E9%85%8D%E7%BD%AE"><span class="toc-number">5.6.3.</span> <span class="toc-text">镜像配置</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E5%AF%86%E4%BB%93%E5%BA%93%E8%A7%A3%E6%9E%90%E4%BE%9D%E8%B5%96%E6%9C%BA%E5%88%B6"><span class="toc-number">5.7.</span> <span class="toc-text">解密仓库解析依赖机制</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5"><span class="toc-number">5.7.1.</span> <span class="toc-text">基础概念</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E6%9E%90%E6%9C%BA%E5%88%B6"><span class="toc-number">5.7.2.</span> <span class="toc-text">解析机制</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AD%E8%82%AF%E5%BB%BA%E8%AE%AE"><span class="toc-number">5.8.</span> <span class="toc-text">中肯建议</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F-amp-%E6%8F%92%E4%BB%B6"><span class="toc-number">6.</span> <span class="toc-text">生命周期&amp;插件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">6.1.</span> <span class="toc-text">生命周期</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%9B%AE%E7%9A%84"><span class="toc-number">6.1.1.</span> <span class="toc-text">目的</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%9C%E7%94%A8-1"><span class="toc-number">6.1.2.</span> <span class="toc-text">作用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8F%92%E4%BB%B6%E6%9C%BA%E5%88%B6"><span class="toc-number">6.1.3.</span> <span class="toc-text">插件机制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%A6%E8%A7%A3"><span class="toc-number">6.1.4.</span> <span class="toc-text">详解</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#clean"><span class="toc-number">6.1.5.</span> <span class="toc-text">clean</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#default"><span class="toc-number">6.1.6.</span> <span class="toc-text">default</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#site"><span class="toc-number">6.1.7.</span> <span class="toc-text">site</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%92%E4%BB%B6"><span class="toc-number">6.2.</span> <span class="toc-text">插件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8F%92%E4%BB%B6%E7%9B%AE%E6%A0%87"><span class="toc-number">6.2.1.</span> <span class="toc-text">插件目标</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8F%92%E4%BB%B6%E7%BB%91%E5%AE%9A"><span class="toc-number">6.2.2.</span> <span class="toc-text">插件绑定</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%85%E7%BD%AE%E7%BB%91%E5%AE%9A"><span class="toc-number">6.2.3.</span> <span class="toc-text">内置绑定</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%91%E5%AE%9A"><span class="toc-number">6.2.4.</span> <span class="toc-text">自定义绑定</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8F%92%E4%BB%B6%E9%85%8D%E7%BD%AE"><span class="toc-number">6.2.5.</span> <span class="toc-text">插件配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%8F%92%E4%BB%B6%E9%85%8D%E7%BD%AE"><span class="toc-number">6.2.6.</span> <span class="toc-text">命令行插件配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#POM-%E4%B8%AD%E6%8F%92%E4%BB%B6%E5%85%A8%E5%B1%80%E5%8F%82%E6%95%B0%E9%85%8D%E7%BD%AE"><span class="toc-number">6.2.7.</span> <span class="toc-text">POM 中插件全局参数配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#POM-%E4%B8%AD%E6%8F%92%E4%BB%B6%E4%BB%BB%E5%8A%A1%E9%85%8D%E7%BD%AE"><span class="toc-number">6.2.8.</span> <span class="toc-text">POM 中插件任务配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E8%B0%83%E7%94%A8%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E3%80%81%E6%8F%92%E4%BB%B6"><span class="toc-number">6.2.9.</span> <span class="toc-text">命令行调用生命周期、插件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8F%92%E4%BB%B6%E8%A7%A3%E6%9E%90%E6%9C%BA%E5%88%B6"><span class="toc-number">6.2.10.</span> <span class="toc-text">插件解析机制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8F%92%E4%BB%B6%E4%BB%93%E5%BA%93"><span class="toc-number">6.2.11.</span> <span class="toc-text">插件仓库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E6%9E%90%E6%8F%92%E4%BB%B6-version"><span class="toc-number">6.2.12.</span> <span class="toc-text">解析插件 version</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E6%9E%90%E6%8F%92%E4%BB%B6%E5%89%8D%E7%BC%80"><span class="toc-number">6.2.13.</span> <span class="toc-text">解析插件前缀</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8F%92%E4%BB%B6%E4%BF%A1%E6%81%AF"><span class="toc-number">6.2.14.</span> <span class="toc-text">插件信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8%E7%BA%BF%E7%BD%91%E7%AB%99%E8%8E%B7%E5%8F%96"><span class="toc-number">6.2.15.</span> <span class="toc-text">在线网站获取</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#maven-help-plugin-%E6%8F%92%E4%BB%B6%E8%8E%B7%E5%8F%96"><span class="toc-number">6.2.16.</span> <span class="toc-text">maven-help-plugin 插件获取</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93"><span class="toc-number">6.2.17.</span> <span class="toc-text">小结</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%81%9A%E5%90%88-amp-%E7%BB%A7%E6%89%BF"><span class="toc-number">7.</span> <span class="toc-text">聚合&amp;继承</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%81%9A%E5%90%88"><span class="toc-number">7.1.</span> <span class="toc-text">聚合</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF"><span class="toc-number">7.2.</span> <span class="toc-text">继承</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E8%AE%BE%E8%AE%A1%E7%90%86%E5%BF%B5"><span class="toc-number">7.3.</span> <span class="toc-text">核心设计理念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%8D%E5%BA%94%E5%A0%86"><span class="toc-number">7.4.</span> <span class="toc-text">反应堆</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89"><span class="toc-number">7.4.1.</span> <span class="toc-text">定义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96%E5%85%B3%E7%B3%BB%E4%B8%8E%E6%9E%84%E5%BB%BA%E9%A1%BA%E5%BA%8F"><span class="toc-number">7.4.2.</span> <span class="toc-text">依赖关系与构建顺序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%89%AA%E8%A3%81%E5%8F%8D%E5%BA%94%E5%A0%86"><span class="toc-number">7.4.3.</span> <span class="toc-text">剪裁反应堆</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%8D-Nexus"><span class="toc-number">8.</span> <span class="toc-text">搭建私服 Nexus</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85Nexus"><span class="toc-number">8.1.</span> <span class="toc-text">安装Nexus</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%87%E4%BB%BDNexus"><span class="toc-number">8.1.1.</span> <span class="toc-text">备份Nexus</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E4%B8%8E%E9%85%8D%E7%BD%AE"><span class="toc-number">8.1.2.</span> <span class="toc-text">常用命令与配置</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">8.1.2.1.</span> <span class="toc-text">常用命令</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE"><span class="toc-number">8.1.2.2.</span> <span class="toc-text">配置</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%93%E5%BA%93%E4%B8%8E%E4%BB%93%E5%BA%93%E7%BB%84"><span class="toc-number">8.2.</span> <span class="toc-text">仓库与仓库组</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%93%E5%BA%93%E7%B1%BB%E5%9E%8B"><span class="toc-number">8.2.1.</span> <span class="toc-text">仓库类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%85%E7%BD%AE%E7%9A%84%E4%BB%93%E5%BA%93%E5%88%97%E8%A1%A8"><span class="toc-number">8.2.2.</span> <span class="toc-text">内置的仓库列表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B0%E5%BB%BA%E5%AE%BF%E4%B8%BB%E4%BB%93%E5%BA%93%E9%A1%B5%E9%9D%A2%EF%BC%9A"><span class="toc-number">8.2.3.</span> <span class="toc-text">新建宿主仓库页面：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B0%E5%BB%BA%E4%BB%A3%E7%90%86%E4%BB%93%E5%BA%93%E9%A1%B5%E9%9D%A2%EF%BC%9A"><span class="toc-number">8.2.4.</span> <span class="toc-text">新建代理仓库页面：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B0%E5%BB%BA%E4%BB%93%E5%BA%93%E7%BB%84%E9%A1%B5%E9%9D%A2%EF%BC%9A"><span class="toc-number">8.2.5.</span> <span class="toc-text">新建仓库组页面：</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E4%B8%8E%E6%90%9C%E7%B4%A2%E6%9E%84%E4%BB%B6"><span class="toc-number">8.3.</span> <span class="toc-text">索引与搜索构件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8ENexus%E4%B8%8B%E8%BD%BD%E6%9E%84%E4%BB%B6"><span class="toc-number">8.4.</span> <span class="toc-text">从Nexus下载构件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86"><span class="toc-number">8.5.</span> <span class="toc-text">权限管理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%83%E5%BA%A6%E4%BB%BB%E5%8A%A1"><span class="toc-number">8.6.</span> <span class="toc-text">调度任务</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/05/09/%E5%86%85%E9%83%A8%E5%8E%9F%E7%90%86/Go/Go%20JSON%20%E4%B8%89%E6%96%B9%E5%8C%85%E5%93%AA%E5%AE%B6%E5%BC%BA%EF%BC%9F/" title="Go JSON 三方包哪家强？"><img src="https://cms.halovina.com/wp-content/uploads/2021/03/golang-json.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Go JSON 三方包哪家强？"/></a><div class="content"><a class="title" href="/2023/05/09/%E5%86%85%E9%83%A8%E5%8E%9F%E7%90%86/Go/Go%20JSON%20%E4%B8%89%E6%96%B9%E5%8C%85%E5%93%AA%E5%AE%B6%E5%BC%BA%EF%BC%9F/" title="Go JSON 三方包哪家强？">Go JSON 三方包哪家强？</a><time datetime="2023-05-08T16:00:00.000Z" title="发表于 2023-05-09 00:00:00">2023-05-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/05/02/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7/%E6%8F%90%E6%95%88%E5%B8%B8%E8%AF%86/" title="提效常识"><img src="https://5b0988e595225.cdn.sohucs.com/images/20180702/8210193a4448400b8aa6cdb214899d78.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="提效常识"/></a><div class="content"><a class="title" href="/2023/05/02/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7/%E6%8F%90%E6%95%88%E5%B8%B8%E8%AF%86/" title="提效常识">提效常识</a><time datetime="2023-05-01T16:00:00.000Z" title="发表于 2023-05-02 00:00:00">2023-05-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/02/02/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7/Copilot/" title="copilot 使用指南"><img src="https://rewind.com/wp-content/uploads/2022/03/github-copilot-logo.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="copilot 使用指南"/></a><div class="content"><a class="title" href="/2023/02/02/%E6%95%88%E7%8E%87%E5%B7%A5%E5%85%B7/Copilot/" title="copilot 使用指南">copilot 使用指南</a><time datetime="2023-02-01T16:00:00.000Z" title="发表于 2023-02-02 00:00:00">2023-02-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/01/13/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/%E5%A6%82%E4%BD%95%E7%94%BB%E6%9E%B6%E6%9E%84%E5%9B%BE%EF%BC%9F/" title="如何画架构图？"><img src="https://picx.zhimg.com/v2-b41d4f2c72f81648f632d2de572fb1a7_720w.jpg?source=172ae18b" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="如何画架构图？"/></a><div class="content"><a class="title" href="/2023/01/13/%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1/%E5%A6%82%E4%BD%95%E7%94%BB%E6%9E%B6%E6%9E%84%E5%9B%BE%EF%BC%9F/" title="如何画架构图？">如何画架构图？</a><time datetime="2023-01-12T16:00:00.000Z" title="发表于 2023-01-13 00:00:00">2023-01-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/05/01/%E5%86%85%E9%83%A8%E5%8E%9F%E7%90%86/Go/Go%20GC%E7%AF%87/" title="Go GC篇"><img src="https://pica.zhimg.com/v2-bef3e615ddc817511f2bddb939920468_720w.jpg?source=172ae18b" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Go GC篇"/></a><div class="content"><a class="title" href="/2022/05/01/%E5%86%85%E9%83%A8%E5%8E%9F%E7%90%86/Go/Go%20GC%E7%AF%87/" title="Go GC篇">Go GC篇</a><time datetime="2022-04-30T16:00:00.000Z" title="发表于 2022-05-01 00:00:00">2022-05-01</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2021 - 2023 By Golden</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>